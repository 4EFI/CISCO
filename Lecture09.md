# RIP (Routing Information Protocol)

RIP — это один из старейших и простейших протоколов динамической маршрутизации, который на протяжении долгого времени использовался для передачи маршрутов в сетях.

## Характеристики RIP

Тип протокола: 

RIP основывается на дистанционно-векторном протоколе (DVA), что делает его одним из наименее сложных для понимания и реализации, но в то же время накладывает определенные ограничения.

Особенности:

- Отсутствие топологической информации: Протокол не хранит информации о топологии сети или, например, о дереве маршрутов. Вместо этого каждый роутер владеет только информацией о своих непосредственных соседях и расстоянии до различных подсетей через этих соседей.
- Метрика: Основным параметром, используемым для оценки маршрута, является количество промежуточных роутеров до конечной точки (количество L3 переходов). Такая метрика дает представление о удаленности подсетей. Максимально достижимая метрика **15**. **16** - недостижимая метрика. Метрика обладает свойством **аддитивности**.

## Вариации RIP

RIP существует в нескольких версиях:

1. RIPv1: Работает на принципе классовой маршрутизации и к настоящему времени практически не используется из-за ограничений, связанных с отсутствием поддержки VLSM (Variable Length Subnet Mask). Всегда отправлялся на broadcast.
  
2. RIPv2: Это улучшенная версия, поддерживающая CIDR (Classless Inter-Domain Routing), а также некоторые новые функции, такие как аутентификация. Может использовать групповые адреса (multicast).
  
3. RIPng (RIP next generation): Расширение протокола для работы в среде IPv6, обеспечивающее динамическую маршрутизацию в современных сетевых инфраструктурах.

## Таймеры протокола

- **Update timer** — определяет частоту отправки обновлений протокола. По истечении этого таймера отправляется обновление. По умолчанию установлен на 30 секунд.

- **Invalid timer** — если обновление о маршруте не поступает до истечения данного таймера, маршрут помечается как недействительный (Invalid), то есть с метрикой 16. По умолчанию длительность этого таймера составляет 180 секунд.

- **Holddown timer** — запускается после того, как маршрут был помечен как недостижимый. До истечения этого таймера маршрут остается в памяти, чтобы предотвратить образование петли, и по нему не передается трафик. По умолчанию находится на значении 180 секунд. Этот таймер не является стандартным и добавлен в реализации Cisco.

- **Flush timer** (garbage collection timer) — по умолчанию установлен на 240 секунд, что на 60 секунд больше, чем invalid timer. Если данный таймер истекает до прихода обновлений о маршруте, маршрут удаляется из таблицы маршрутизации. Удаляются также и соответствующие ему таймеры.

**!!! Holddown timer никогда не истекает по реализации CISCO. Так как flush timer срабатывает раньше !!!**

## Борьба с петлями

Счет до бесконечности (count to infinity):

<p style="text-align: left"><img src=res/9_1.png width="400px"/></p>

- **Split horizon** — роутер не отправляет обратно Update, через тот интерфейс, через который он его получил, если этот роутер, сам этот Update использует.

- **Poison reverse** (усиление Split horizon) — маршрут (через которую получил лучшую метрику) помечается как недостижимый (с метрикой 16).

- **Route poisoning** — принудительное удаление маршрута, префикс помечается недостижимым, высылается обновление с метрикой 16 о данном маршруте.

- **Triggered update** — обновления отправляются сразу при изменении маршрута, вместо того чтобы ждать истечения Update timer.

## Особенности анонсирования сетей

- По умолчанию, роутер выполняет автоматическую суммаризацию до сети класса. 